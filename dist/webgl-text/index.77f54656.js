!function(t,e,i,a,n){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r="function"==typeof s.parcelRequire9b6a&&s.parcelRequire9b6a,o=r.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function h(e,i){if(!o[e]){if(!t[e]){var a="function"==typeof s.parcelRequire9b6a&&s.parcelRequire9b6a;if(!i&&a)return a(e,!0);if(r)return r(e,!0);if(l&&"string"==typeof e)return l(e);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}u.resolve=function(i){var a=t[e][1][i];return null!=a?a:i},u.cache={};var c=o[e]=new h.Module(e);t[e][0].call(c.exports,u,c,c.exports,this)}return o[e].exports;function u(t){var e=u.resolve(t);return!1===e?{}:h(e)}}h.isParcelRequire=!0,h.Module=function(t){this.id=t,this.bundle=h,this.exports={}},h.modules=t,h.cache=o,h.parent=r,h.register=function(e,i){t[e]=[function(t,e){e.exports=i},{}]},Object.defineProperty(h,"root",{get:function(){return s.parcelRequire9b6a}}),s.parcelRequire9b6a=h;for(var c=0;c<e.length;c++)h(e[c]);var u=h(i);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define((function(){return u}))}({"2bTU0":[function(t,e,i){t("tweakpane");var a,n,s=t("./webgl-text");window.addEventListener("load",(function(){var t,e=document.body.querySelector("#c");a=new s.WebGLText(e,t,(function(t){t.run()}))})),window.addEventListener("resize",(function(){a&&(n&&clearTimeout(n),n=setTimeout((function(){n=null,a.resize()}),300))}))},{tweakpane:"53J2X","./webgl-text":"8Q9gJ"}],"8Q9gJ":[function(t,e,i){var a=t("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(i),a.export(i,"WebGLText",(function(){return b}));var n=t("@swc/helpers"),s=t("twgl.js"),r=t("../math/m4"),o=t("./shader/f-fragment.glsl"),l=a.interopDefault(o),h=t("./shader/f-vertex.glsl"),c=a.interopDefault(h),u=t("./shader/text-fragment.glsl"),f=a.interopDefault(u),d=t("./shader/text-vertex.glsl"),v=a.interopDefault(d),m=new WeakSet,g=new WeakSet,x=new WeakSet,p=new WeakSet,_=new WeakSet,w=new WeakSet,M=new WeakSet,P=new WeakSet,b=function(){"use strict";function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n.classCallCheck(this,t),n.defineProperty(this,"oninit",void 0),y.set(this,{writable:!0,value:0}),E.set(this,{writable:!0,value:0}),C.set(this,{writable:!0,value:!1}),n.defineProperty(this,"camera",{radius:1e3,rotation:0,position:[0,0,0],matrix:s.m4.identity()}),m.add(this),g.add(this),x.add(this),p.add(this),_.add(this),w.add(this),M.add(this),P.add(this),this.canvas=e,this.pane=i,this.oninit=a,n.classPrivateMethodGet(this,g,T).call(this)}return n.createClass(t,[{key:"resize",value:function(){n.classPrivateMethodGet(this,M,F).call(this,this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),n.classPrivateMethodGet(this,w,G).call(this)}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this;n.classPrivateFieldSet(this,E,t-n.classPrivateFieldGet(this,y)),n.classPrivateFieldSet(this,y,t),n.classPrivateFieldGet(this,C)||(this.camera.rotation+=n.classPrivateFieldGet(this,E)/8e3*Math.PI*2,this.camera.position[0]=Math.cos(this.camera.rotation)*this.camera.radius,this.camera.position[2]=Math.sin(this.camera.rotation)*this.camera.radius,n.classPrivateMethodGet(this,_,U).call(this),n.classPrivateMethodGet(this,m,I).call(this),requestAnimationFrame((function(t){return e.run(t)})))}},{key:"destroy",value:function(){n.classPrivateFieldSet(this,C,!0)}}]),t}(),y=new WeakMap,E=new WeakMap,C=new WeakMap;function I(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.disable(this.gl.BLEND),this.gl.depthMask(!0),this.gl.useProgram(this.fProgramInfo.program),this.gl.bindVertexArray(this.fVAO);for(var t={u_worldMatrix:s.m4.identity()},e=200,i=[],a=0;a<4;a++)for(var o=0;o<4;o++){var l=s.m4.translation([a*e-300,o*e-300,0]),h=(n.classPrivateFieldGet(this,y)/3e3+o*a*.035)*Math.PI*2,c=(n.classPrivateFieldGet(this,y)/3e3+o*a*.015)*Math.PI*2;s.m4.rotateX(l,h,l),s.m4.rotateY(l,c,l),s.m4.translate(l,this.fOrigin,l),i.push(l),t.u_worldMatrix=l;var u=n.objectSpread({},this.globalUniforms,t);s.setUniforms(this.fProgramInfo,u),s.drawBufferInfo(this.gl,this.fBufferInfo)}var f=i[6];s.m4.multiply(this.globalUniforms.u_viewMatrix,f,f),s.m4.multiply(this.globalUniforms.u_projectionMatrix,f,f);var d=r.m4.transformVector(f,[0,0,0,1]);d=s.v3.divScalar(d,d[3]),d=s.v3.multiply(d,[.5*this.gl.canvas.clientWidth,.5*-this.gl.canvas.clientHeight,0]),d=s.v3.add(d,[.5*this.gl.canvas.clientWidth,.5*this.gl.canvas.clientHeight,0]),this.overlayElm.style.transform="translate(".concat(d[0],"px,").concat(d[1],"px)"),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.depthMask(!1),this.gl.useProgram(this.textProgramInfo.program),this.gl.bindVertexArray(this.textVAO);var v=s.m4.multiply(this.globalUniforms.u_viewMatrix,i[9]),m=[v[12],v[13],v[14]],g=s.v3.normalize(m);m[0]-=150*g[0],m[1]-=150*g[1],m[2]-=150*g[2];var x=s.v3.mulScalar(this.textScale,-m[2]/this.gl.canvas.height),p=s.m4.scale(s.m4.translation(m),x);s.m4.scale(p,[.25,.25,1],p);var _={u_worldMatrix:p,u_viewMatrix:s.m4.identity(),u_texture:this.textTexture};s.setUniforms(this.textProgramInfo,n.objectSpread({},this.globalUniforms,_)),s.drawBufferInfo(this.gl,this.textBufferInfo)}function T(){if(this.gl=this.canvas.getContext("webgl2"),!this.gl)throw new Error("No WebGL 2 context!");this.parentElm=this.canvas.parentElement,this.parentElm.style.position="relative",s.setAttributePrefix("a_"),this.fProgramInfo=s.createProgramInfo(this.gl,[c.default,l.default]),this.textProgramInfo=s.createProgramInfo(this.gl,[v.default,f.default]),this.fBufferInfo=s.primitives.create3DFBufferInfo(this.gl),this.fVAO=s.createVAOFromBufferInfo(this.gl,this.fProgramInfo,this.fBufferInfo),this.fOrigin=[-50,-75,-15],this.textBufferInfo=s.primitives.createXYQuadBufferInfo(this.gl,1),this.textVAO=s.createVAOFromBufferInfo(this.gl,this.textProgramInfo,this.textBufferInfo);var t=n.classPrivateMethodGet(this,x,L).call(this,"HELLO TEXTURE!",800,130);this.textTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textTexture),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.textScale=[t.width,t.height,1],this.globalUniforms={u_viewMatrix:s.m4.identity(),u_projectionMatrix:s.m4.identity()},this.resize(),n.classPrivateMethodGet(this,_,U).call(this),n.classPrivateMethodGet(this,w,G).call(this),n.classPrivateMethodGet(this,p,S).call(this),n.classPrivateMethodGet(this,P,B).call(this),this.oninit&&this.oninit(this)}function L(t,e,i){return this.textCanvas||(this.textCanvas=document.createElement("canvas"),this.textCanvasContext=this.textCanvas.getContext("2d")),this.textCanvasContext.canvas.width=e,this.textCanvasContext.canvas.height=i,this.textCanvasContext.font="bold 85px sans-serif",this.textCanvasContext.textAlign="center",this.textCanvasContext.textBaseline="middle",this.textCanvasContext.fillStyle="white",this.textCanvasContext.clearRect(0,0,this.textCanvasContext.canvas.width,this.textCanvasContext.canvas.height),this.textCanvasContext.fillText(t,e/2,i/2),this.textCanvas}function S(){this.overlayElm=document.createElement("div"),this.overlayElm.style.position="absolute",this.overlayElm.style.fontSize="1em",this.overlayElm.style.color="white",this.overlayElm.style.top=0,this.overlayElm.style.left=0,this.overlayElm.style.borderTop="1px solid red",this.overlayElm.innerText="HTML",this.parentElm.appendChild(this.overlayElm)}function U(){s.m4.lookAt(this.camera.position,[0,0,0],[0,1,0],this.camera.matrix),s.m4.inverse(this.camera.matrix,this.globalUniforms.u_viewMatrix)}function G(){var t=this.gl.canvas.clientWidth/this.gl.canvas.clientHeight;s.m4.perspective(Math.PI/4,t,1,4e3,this.globalUniforms.u_projectionMatrix)}function F(t){var e=t.clientWidth,i=t.clientHeight,a=t.width!==e||t.height!==i;return a&&(t.width=e,t.height=i),a}function B(){if(this.pane){var t=this;this.pane.addBlade({view:"slider",label:"c.radius",min:100,max:2*this.camera.radius,value:this.camera.radius}).on("change",(function(e){t.camera.radius=e.value,n.classPrivateMethodGet(t,_,U).call(t)})),this.pane.addBlade({view:"slider",label:"c.y",min:-1e3,max:1e3,value:this.camera.position[1]}).on("change",(function(e){t.camera.position[1]=e.value,n.classPrivateMethodGet(t,_,U).call(t)}))}}},{"@swc/helpers":"2CIBz","twgl.js":"bpC7N","../math/m4":"d0U9A","./shader/f-fragment.glsl":"gfcle","./shader/f-vertex.glsl":"1Fj2W","./shader/text-fragment.glsl":"5l2dN","./shader/text-vertex.glsl":"bRnSq","@parcel/transformer-js/src/esmodule-helpers.js":"jiucr"}],gfcle:[function(t,e,i){e.exports='#version 300 es\n\n// fragment shaders don\'t have a default precision so we need\n// to pick one. highp is a good default. It means "high precision"\nprecision highp float;\n#define GLSLIFY 1\n\nuniform float u_time;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n    outColor = v_color;\n}\n'},{}],"1Fj2W":[function(t,e,i){e.exports="#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec4 a_position;\nin vec4 a_color;\n\nout vec4 v_color;\n\nvoid main() {\n    v_color = a_color;\n    gl_Position = u_projectionMatrix * u_viewMatrix * u_worldMatrix * a_position;\n}\n"},{}],"5l2dN":[function(t,e,i){e.exports='#version 300 es\n\n// fragment shaders don\'t have a default precision so we need\n// to pick one. highp is a good default. It means "high precision"\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\n\nin vec2 v_uv;\n\nout vec4 outColor;\n\nvoid main() {\n    outColor = texture(u_texture, v_uv) * vec4(v_uv + 0.2, 1., 1.);\n}\n'},{}],bRnSq:[function(t,e,i){e.exports="#version 300 es\n#define GLSLIFY 1\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nout vec2 v_uv;\n\nvoid main() {\n    v_uv = a_texcoord;\n    gl_Position = u_projectionMatrix * u_viewMatrix * u_worldMatrix * a_position;\n}\n"},{}]},["2bTU0"],"2bTU0");
//# sourceMappingURL=index.77f54656.js.map
